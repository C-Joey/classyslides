\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{beamerthemeclassyslidesheader}[2018/10/25 default header for classy slides]

\RequirePackage{lastpage}

\defbeamertemplate{headline}{classy headline}[1][]{%
    \bgroup%
    \begin{beamercolorbox}[wd=\paperwidth, ht=0.5cm]{headline}%
      % Do not show the progress bar on the first page and content pages
      \ifnum\thepage=1\relax%
        \else\ifcontentpage%
          \else%
            % Calculate progress bar width.
            \setcounter{@@frame}{\thepage}%
            \setcounter{@@total}{\getpagerefnumber{LastPage}}%
            \addtocounter{@@frame}{-1}%
            \addtocounter{@@total}{-1}%
            \ifnum\the@@total=0%
                \dimen0=\paperwidth%
            \else%
                \dimen0=\paperwidth%
                \divide\dimen0 by 100%
                \multiply\dimen0 by \the@@frame%
                \divide\dimen0 by \the@@total%
                % This equals `<paperwidth>/100 * (<frames> - 1) / (<total> - 1) * 100`
                \multiply\dimen 0 by 100%
            \fi%
          \fi%
        \fi%
    \end{beamercolorbox}%
    % \@ifundefined{r@LastPage}{}{%
    %     \setcounter{@@frame}{\thepage}%
    %     \setcounter{@@total}{\getpagerefnumber{LastPage}}%
    %     \addtocounter{@@frame}{-1}%
    %     \addtocounter{@@total}{-1}%
    %     \ifnum\the@@total=0%
    %         \dimen0=\paperwidth%
    %     \else%
    %         \dimen0=\paperwidth%
    %         \divide\dimen0 by 100%
    %         \multiply\dimen0 by \the@@frame%
    %         \divide\dimen0 by \the@@total%
    %         % This equals `<paperwidth>/100 * (<frames> - 1) / (<total> - 1) * 100`
    %         \multiply\dimen 0 by 100%
    %     \fi%
    %     \edef\progressbarwidth{\the\dimen0}%
    %     \begin{beamercolorbox}[wd=\paperwidth, ht=0.5cm]{headline}%
    %         % Don't draw the progress bar on the first page
    %         \ifnum\thepage=1\relax%
    %         \else%
    %             \usebeamercolor{progress bar}%
    %             \begin{tikzpicture}%
    %                 \draw[draw=none, use as bounding box] (0, 0) rectangle (\paperwidth, 0.5cm);%
    %                 \draw[on layer=back, draw=none, fill=fg!15] (0, 0) rectangle (\paperwidth, 0.5cm);%
    %                 \draw[on layer=main, draw=none, fill=fg] (0, 0) rectangle (\progressbarwidth, 0.5cm);%
    %                 \draw[on layer=main, draw=fg!50!bg, line width=1pt] (0, 0cm) -- (\paperwidth, 0cm);%
    %             \end{tikzpicture}%
    %         \fi
    %     \end{beamercolorbox}
    % }%
	\egroup%
}
\setbeamertemplate{headline}[classy headline]